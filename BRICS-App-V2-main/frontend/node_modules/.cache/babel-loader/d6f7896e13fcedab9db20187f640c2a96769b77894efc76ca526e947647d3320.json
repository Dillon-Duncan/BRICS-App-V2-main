{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useAuth}from'../AuthContext';// Assuming AuthContext provides user and other methods\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const EmployeeDashboard=()=>{const[paymentHistory,setPaymentHistory]=useState([]);const{user}=useAuth();useEffect(()=>{const fetchPaymentHistory=async()=>{try{const response=await fetch('/api/payment-history',{headers:{'Content-Type':'application/json',Authorization:`Bearer ${document.cookie.split('token=')[1]}`// Token assumed to be in cookies\n}});if(!response.ok){throw new Error('Failed to fetch payment history');}const data=await response.json();setPaymentHistory(data);}catch(error){console.error('Error fetching payment history:',error);}};if((user===null||user===void 0?void 0:user.role)==='employee'){fetchPaymentHistory();}},[user]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Employee Dashboard\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"Payment History\"}),paymentHistory.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No payment history available.\"}):/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"User\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Payment Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Amount\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Date\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:paymentHistory.map((payment,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:payment.userName}),/*#__PURE__*/_jsx(\"td\",{children:payment.name}),/*#__PURE__*/_jsx(\"td\",{children:payment.amount}),/*#__PURE__*/_jsx(\"td\",{children:new Date(payment.date).toLocaleDateString()})]},index))})]})]});};export default EmployeeDashboard;","map":{"version":3,"names":["React","useEffect","useState","useAuth","jsx","_jsx","jsxs","_jsxs","EmployeeDashboard","paymentHistory","setPaymentHistory","user","fetchPaymentHistory","response","fetch","headers","Authorization","document","cookie","split","ok","Error","data","json","error","console","role","children","length","map","payment","index","userName","name","amount","Date","date","toLocaleDateString"],"sources":["C:/Users/mrdun/Downloads/BRICS-App-V2-main/BRICS-App-V2-main/frontend/src/components/EmployeeDashboard.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useAuth } from '../AuthContext'; // Assuming AuthContext provides user and other methods\n\nconst EmployeeDashboard = () => {\n  const [paymentHistory, setPaymentHistory] = useState([]);\n  const { user } = useAuth();\n\n  useEffect(() => {\n    const fetchPaymentHistory = async () => {\n      try {\n        const response = await fetch('/api/payment-history', {\n          headers: {\n            'Content-Type': 'application/json',\n            Authorization: `Bearer ${document.cookie.split('token=')[1]}`, // Token assumed to be in cookies\n          },\n        });\n        if (!response.ok) {\n          throw new Error('Failed to fetch payment history');\n        }\n        const data = await response.json();\n        setPaymentHistory(data);\n      } catch (error) {\n        console.error('Error fetching payment history:', error);\n      }\n    };\n\n    if (user?.role === 'employee') {\n      fetchPaymentHistory();\n    }\n  }, [user]);\n\n  return (\n    <div>\n      <h2>Employee Dashboard</h2>\n      <h3>Payment History</h3>\n      {paymentHistory.length === 0 ? (\n        <p>No payment history available.</p>\n      ) : (\n        <table>\n          <thead>\n            <tr>\n              <th>User</th>\n              <th>Payment Name</th>\n              <th>Amount</th>\n              <th>Date</th>\n            </tr>\n          </thead>\n          <tbody>\n            {paymentHistory.map((payment, index) => (\n              <tr key={index}>\n                <td>{payment.userName}</td>\n                <td>{payment.name}</td>\n                <td>{payment.amount}</td>\n                <td>{new Date(payment.date).toLocaleDateString()}</td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      )}\n    </div>\n  );\n};\n\nexport default EmployeeDashboard;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,OAAO,KAAQ,gBAAgB,CAAE;AAAA,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE1C,KAAM,CAAAC,iBAAiB,CAAGA,CAAA,GAAM,CAC9B,KAAM,CAACC,cAAc,CAAEC,iBAAiB,CAAC,CAAGR,QAAQ,CAAC,EAAE,CAAC,CACxD,KAAM,CAAES,IAAK,CAAC,CAAGR,OAAO,CAAC,CAAC,CAE1BF,SAAS,CAAC,IAAM,CACd,KAAM,CAAAW,mBAAmB,CAAG,KAAAA,CAAA,GAAY,CACtC,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,sBAAsB,CAAE,CACnDC,OAAO,CAAE,CACP,cAAc,CAAE,kBAAkB,CAClCC,aAAa,CAAE,UAAUC,QAAQ,CAACC,MAAM,CAACC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,EAAI;AACjE,CACF,CAAC,CAAC,CACF,GAAI,CAACN,QAAQ,CAACO,EAAE,CAAE,CAChB,KAAM,IAAI,CAAAC,KAAK,CAAC,iCAAiC,CAAC,CACpD,CACA,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAT,QAAQ,CAACU,IAAI,CAAC,CAAC,CAClCb,iBAAiB,CAACY,IAAI,CAAC,CACzB,CAAE,MAAOE,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,iCAAiC,CAAEA,KAAK,CAAC,CACzD,CACF,CAAC,CAED,GAAI,CAAAb,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEe,IAAI,IAAK,UAAU,CAAE,CAC7Bd,mBAAmB,CAAC,CAAC,CACvB,CACF,CAAC,CAAE,CAACD,IAAI,CAAC,CAAC,CAEV,mBACEJ,KAAA,QAAAoB,QAAA,eACEtB,IAAA,OAAAsB,QAAA,CAAI,oBAAkB,CAAI,CAAC,cAC3BtB,IAAA,OAAAsB,QAAA,CAAI,iBAAe,CAAI,CAAC,CACvBlB,cAAc,CAACmB,MAAM,GAAK,CAAC,cAC1BvB,IAAA,MAAAsB,QAAA,CAAG,+BAA6B,CAAG,CAAC,cAEpCpB,KAAA,UAAAoB,QAAA,eACEtB,IAAA,UAAAsB,QAAA,cACEpB,KAAA,OAAAoB,QAAA,eACEtB,IAAA,OAAAsB,QAAA,CAAI,MAAI,CAAI,CAAC,cACbtB,IAAA,OAAAsB,QAAA,CAAI,cAAY,CAAI,CAAC,cACrBtB,IAAA,OAAAsB,QAAA,CAAI,QAAM,CAAI,CAAC,cACftB,IAAA,OAAAsB,QAAA,CAAI,MAAI,CAAI,CAAC,EACX,CAAC,CACA,CAAC,cACRtB,IAAA,UAAAsB,QAAA,CACGlB,cAAc,CAACoB,GAAG,CAAC,CAACC,OAAO,CAAEC,KAAK,gBACjCxB,KAAA,OAAAoB,QAAA,eACEtB,IAAA,OAAAsB,QAAA,CAAKG,OAAO,CAACE,QAAQ,CAAK,CAAC,cAC3B3B,IAAA,OAAAsB,QAAA,CAAKG,OAAO,CAACG,IAAI,CAAK,CAAC,cACvB5B,IAAA,OAAAsB,QAAA,CAAKG,OAAO,CAACI,MAAM,CAAK,CAAC,cACzB7B,IAAA,OAAAsB,QAAA,CAAK,GAAI,CAAAQ,IAAI,CAACL,OAAO,CAACM,IAAI,CAAC,CAACC,kBAAkB,CAAC,CAAC,CAAK,CAAC,GAJ/CN,KAKL,CACL,CAAC,CACG,CAAC,EACH,CACR,EACE,CAAC,CAEV,CAAC,CAED,cAAe,CAAAvB,iBAAiB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}