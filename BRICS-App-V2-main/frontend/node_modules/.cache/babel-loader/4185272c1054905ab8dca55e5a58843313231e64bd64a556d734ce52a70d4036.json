{"ast":null,"code":"const BASE_URL = 'http://localhost:8080';\nlet csrfToken = null;\nasync function getCsrfToken() {\n  if (!csrfToken) {\n    const response = await fetch(`${BASE_URL}/csrf-token`, {\n      credentials: 'include'\n    });\n    const data = await response.json();\n    csrfToken = data.csrfToken;\n  }\n  return csrfToken;\n}\nexport async function registerUser(userData) {\n  const token = await getCsrfToken();\n  const response = await fetch(`${BASE_URL}/register`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      'CSRF-Token': token\n    },\n    credentials: 'include',\n    body: JSON.stringify(userData)\n  });\n  if (!response.ok) {\n    const {\n      error\n    } = await response.json();\n    throw new Error(error || 'Registration failed');\n  }\n  return response.json();\n}\nexport async function loginUserAPI({\n  username,\n  password,\n  accNumber\n}) {\n  const token = await getCsrfToken();\n  const response = await fetch(`${BASE_URL}/login`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      'CSRF-Token': token\n    },\n    credentials: 'include',\n    body: JSON.stringify({\n      userName: username,\n      password,\n      accNumber\n    })\n  });\n  if (!response.ok) {\n    const {\n      error\n    } = await response.json();\n    throw new Error(error || 'Invalid login');\n  }\n  const data = await response.json();\n  if (!data.success || !data.data || !data.data.token) {\n    throw new Error('Invalid response from server');\n  }\n  return data;\n}\nexport async function getBudget() {\n  const token = await getCsrfToken();\n  const response = await fetch('/api/budget', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${token}`\n    }\n  });\n  if (!response.ok) {\n    const {\n      error\n    } = await response.json();\n    throw new Error(error || 'Failed to fetch budget');\n  }\n  return response.json();\n}\nexport async function updateBudget(budgetData) {\n  const token = await getCsrfToken();\n  const response = await fetch('/api/budget', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${token}`\n    },\n    credentials: 'include',\n    body: JSON.stringify(budgetData)\n  });\n  if (!response.ok) {\n    const {\n      error\n    } = await response.json();\n    throw new Error(error || 'Failed to update budget');\n  }\n  return response.json();\n}\nexport async function getTransactions() {\n  const token = await getCsrfToken();\n  console.log(\"Token for getTransactions:\", token); // Log the token\n  const response = await fetch('/api/transactions', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${token}`\n    }\n  });\n  if (!response.ok) {\n    const {\n      error\n    } = await response.json();\n    throw new Error(error || 'Failed to fetch transactions');\n  }\n  return response.json();\n}\nexport async function createTransaction(transactionData) {\n  const token = await getCsrfToken();\n  const response = await fetch('/api/transactions', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${token}`\n    },\n    body: JSON.stringify(transactionData)\n  });\n  if (!response.ok) {\n    const {\n      error\n    } = await response.json();\n    throw new Error(error || 'Failed to create transaction');\n  }\n  return response.json();\n}","map":{"version":3,"names":["BASE_URL","csrfToken","getCsrfToken","response","fetch","credentials","data","json","registerUser","userData","token","method","headers","body","JSON","stringify","ok","error","Error","loginUserAPI","username","password","accNumber","userName","success","getBudget","updateBudget","budgetData","getTransactions","console","log","createTransaction","transactionData"],"sources":["C:/Users/mrdun/Downloads/BRICS-App-V2-main/BRICS-App-V2-main/frontend/src/api.js"],"sourcesContent":["const BASE_URL = 'http://localhost:8080';\nlet csrfToken = null;\n\nasync function getCsrfToken() {\n  if (!csrfToken) {\n    const response = await fetch(`${BASE_URL}/csrf-token`, {\n      credentials: 'include'\n    });\n    const data = await response.json();\n    csrfToken = data.csrfToken;\n  }\n  return csrfToken;\n}\n\nexport async function registerUser(userData) {\n  const token = await getCsrfToken();\n  const response = await fetch(`${BASE_URL}/register`, {\n    method: 'POST',\n    headers: { \n      'Content-Type': 'application/json',\n      'CSRF-Token': token\n    },\n    credentials: 'include',\n    body: JSON.stringify(userData),\n  });\n\n  if (!response.ok) {\n    const { error } = await response.json();\n    throw new Error(error || 'Registration failed');\n  }\n\n  return response.json();\n}\n\nexport async function loginUserAPI({ username, password, accNumber }) {\n  const token = await getCsrfToken();\n  const response = await fetch(`${BASE_URL}/login`, {\n    method: 'POST',\n    headers: { \n      'Content-Type': 'application/json',\n      'CSRF-Token': token\n    },\n    credentials: 'include',\n    body: JSON.stringify({ userName: username, password, accNumber }),\n  });\n\n  if (!response.ok) {\n    const { error } = await response.json();\n    throw new Error(error || 'Invalid login');\n  }\n\n  const data = await response.json();\n  if (!data.success || !data.data || !data.data.token) {\n    throw new Error('Invalid response from server');\n  }\n\n  return data;\n}\n\n\n\nexport async function getBudget() {\n  const token = await getCsrfToken();\n  const response = await fetch('/api/budget', {\n    method: 'POST', \n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${token}`\n    },\n  });\n\n  if (!response.ok) {\n    const { error } = await response.json();\n    throw new Error(error || 'Failed to fetch budget');\n  }\n\n  return response.json();\n}\n\nexport async function updateBudget(budgetData) {\n  const token = await getCsrfToken();\n  const response = await fetch('/api/budget', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${token}`\n    },\n    credentials: 'include',\n    body: JSON.stringify(budgetData),\n  });\n\n  if (!response.ok) {\n    const { error } = await response.json();\n    throw new Error(error || 'Failed to update budget');\n  }\n\n  return response.json();\n}\n\nexport async function getTransactions() {\n    const token = await getCsrfToken();\n    console.log(\"Token for getTransactions:\", token); // Log the token\n    const response = await fetch('/api/transactions', {\n      method: 'POST', \n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${token}`\n      },\n    });\n  \n    if (!response.ok) {\n      const { error } = await response.json();\n      throw new Error(error || 'Failed to fetch transactions');\n    }\n  \n    return response.json();\n  }\n\nexport async function createTransaction(transactionData) {\n  const token = await getCsrfToken();\n  const response = await fetch('/api/transactions', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${token}`\n    },\n    body: JSON.stringify(transactionData),\n  });\n\n  if (!response.ok) {\n    const { error } = await response.json();\n    throw new Error(error || 'Failed to create transaction');\n  }\n\n  return response.json();\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}